import{E as o,S as X,a as N,T as y,b as L,V as M,M as B}from"./babylon.inspector.bundle.max-VR0oASMa.js";import"https://cdn.img.ly/packages/imgly/cesdk-js/1.18.1/cesdk.umd.js";const m=document.querySelector(".maleModelBtn"),R=document.querySelector(".femaleModelBtn");m.addEventListener("mouseover",t=>{m.style.backgroundColor="white",R.style.backgroundColor="transparent"});m.addEventListener("mouseout",t=>{m.style.backgroundColor="transparent",R.style.backgroundColor="white"});const K=document.getElementById("renderCanvas"),g=new o(K),C=document.querySelector(".preview");document.querySelector(".exportBtn");const Z="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/color_map.jpg?t=2023-12-13T21%3A45%3A00.971Z",Q="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/render_map.jpg";document.querySelector(".switchModel");const W=function(){const t=new X(g);t.createDefaultCamera(!0,!0,!0);const U=t.activeCamera;U.wheelDeltaPercentage=.01,t.createDefaultLight();const T=document.querySelector(".startAnimationBtn"),_=document.querySelector(".stopAnimationBtn"),O="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/models/g8Walking.glb",j=-.3,z=.35;return N.ImportMesh("",O,"",t,function(F){var c=F[0];c.position.y=j,c.scaling.scaleInPlace(z);const A=1,H=.2,V=.2,r=new y(Z,t),E=new L("defaultMat",t);E.diffuseTexture=r,E.roughness=0;const f=new L("test",t),s=new y(Q,t,void 0,!1);f.diffuseTexture=s,f.roughness=0,s.uScale=r.uScale=A/H,s.vScale=r.vScale=A/V,s.uOffset=r.uOffset=-0,s.vOffset=r.vOffset=-0,c.getChildMeshes().forEach((e,n)=>{e.material=f}),t.stopAllAnimations(),c.rotation=new M(0,0,0);const p=t.getAnimationGroupByName("Armature|mixamo.com|Layer0");T.addEventListener("click",()=>{p.start(!0,1,p.from,p.to,!1)}),_.addEventListener("click",()=>{t.stopAllAnimations()});const S=document.getElementById("angle"),x=document.getElementById("width"),D=document.querySelector("input");var h="./cat.png";let u;const Y={license:"vERESgSXbYj5Rs-FF4DzkMvhdQLh0Mxe6AD8V-doP6wqe_gmYmx_oUKqIlMkwpMu",userId:"guides-user",ui:{elements:{view:"default",navigation:{show:!0,position:"top",action:{close:!1,back:!1,load:!1,save:!1,export:{show:!0,format:["image/png"]},download:!0}},panels:{inspector:{show:!0,position:"left"},assetLibrary:{show:!0,position:"left"},settings:{show:!0}},dock:{iconSize:"large",hideLabels:!1,groups:[{id:"ly.img.template",entryIds:["ly.img.template"]},{id:"ly.img.defaultGroup",showOverview:!0}],defaultGroupId:"ly.img.defaultGroup"},libraries:{insert:{entries:e=>e,floating:!0,autoClose:!1},replace:{entries:e=>e,floating:!0,autoClose:!1}},blocks:{opacity:!1,transform:!1,"//ly.img.ubq/image":{adjustments:!0,filters:!0,effects:!0,blur:!0,crop:!0},"//ly.img.ubq/page":{manage:!0,format:!0,maxDuration:30*60}}},pageFormats:{"din-a6":{default:!0,width:148,height:105,unit:"Millimeter",fixedOrientation:!1},"twitter-profile":{width:400,height:400,unit:"Pixel"},"american-letter":{width:8.5,height:11,unit:"Inch"}}},callbacks:{onUpload:"local",onExport:(e,n)=>{let a=URL.createObjectURL(e[0]);return C.src=a,h=a,i(),u=i(),Promise.resolve()},onUpload:(e,n)=>{console.log(e);let a=URL.createObjectURL(e);const k={id:a,meta:{uri:a,thumbUri:a}};return Promise.resolve(k)}}};CreativeEditorSDK.create("#cesdk_container",Y).then(async e=>{e.addDefaultAssetSources(),e.addDemoAssetSources({sceneMode:"Design"}),await e.createDesignScene()}),D.addEventListener("change",function(e){const n=e.target.files[0];if(n){const a=new FileReader;a.onload=function(k){let G=URL.createObjectURL(D.files[0]);C.src=k.target.result,h=G,i(),u=i()},a.readAsDataURL(n)}}),o.ALPHA_COMBINE,o.ALPHA_ADD,o.ALPHA_SUBTRACT,o.ALPHA_MULTIPLY,o.ALPHA_MAXIMIZED;function i(){const e=new L("mat",t),n=new y(`${h}`,t);return e.diffuseTexture=n,e.diffuseTexture.hasAlpha=!0,e.zOffset=-2,e}i(),t.getMeshByName("FinalBaseMesh");var v=null;let l=.03,I=0,w=new M(l,l,.05),b=0;x.addEventListener("change",function(){l=x.value/1,w=new M(l,l+.01,.03)}),S.addEventListener("change",function(){I=S.value/10,b=I});function P(){v&&v.dispose();var e=t.pick(t.pointerX,t.pointerY);if(e.hit){var n=B.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),angle:b,size:w});n.material=u,v=n}}function q(){const e=t.pick(t.pointerX,t.pointerY);if(e.pickedMesh){var n=B.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),size:w,angle:b});n.material=u}}var d=g.getRenderingCanvas();d.addEventListener("mousemove",P,!1),d.addEventListener("dblclick",q,!1),d.addEventListener("touchstart",q,!1),t.onDispose=function(){d.removeEventListener("mousemove",P)}}),t},$=W();g.runRenderLoop(function(){$.render()});window.addEventListener("resize",function(){g.resize()});
