import{E as o,S as G,a as X,T as L,b as M,V as y,M as C}from"./babylon.inspector.bundle.max-VR0oASMa.js";import"https://cdn.img.ly/packages/imgly/cesdk-js/1.18.1/cesdk.umd.js";const R=document.querySelector(".maleModelBtn"),d=document.querySelector(".femaleModelBtn");d.addEventListener("mouseover",t=>{d.style.backgroundColor="white",R.style.backgroundColor="transparent"});d.addEventListener("mouseout",t=>{d.style.backgroundColor="transparent",R.style.backgroundColor="white"});const N=document.getElementById("renderCanvas"),m=new o(N),P=document.querySelector("img");document.querySelector(".exportBtn");const K="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/color_map.jpg?t=2023-12-13T21%3A45%3A00.971Z",Z="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/render_map.jpg";document.querySelector(".switchModel");const Q=function(){const t=new G(m);t.createDefaultCamera(!0,!0,!0);const U=t.activeCamera;U.wheelDeltaPercentage=.01,t.createDefaultLight();const T=document.querySelector(".startAnimationBtn"),_=document.querySelector(".stopAnimationBtn"),O="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/files/ModelwithSkinUV2.glb",j=.6;return X.ImportMesh("",O,"",t,function(z){var g=z[0];g.scaling.scaleInPlace(j);const A=1,F=.2,H=.2,r=new L(K,t),S=new M("defaultMat",t);S.diffuseTexture=r,S.roughness=0;const f=new M("test",t),s=new L(Z,t,void 0,!1);f.diffuseTexture=s,f.roughness=0,s.uScale=r.uScale=A/F,s.vScale=r.vScale=A/H,s.uOffset=r.uOffset=-0,s.vOffset=r.vOffset=-0,g.getChildMeshes().forEach((e,n)=>{e.material=f}),t.stopAllAnimations(),g.rotation=new y(0,0,0);const p=t.getAnimationGroupByName("Armature|mixamo.com|Layer0");T.addEventListener("click",()=>{p.start(!0,1,p.from,p.to,!1)}),_.addEventListener("click",()=>{t.stopAllAnimations()});const E=document.getElementById("angle"),x=document.getElementById("width"),D=document.querySelector("input");var h="./cat.png";let c;const V={license:"vERESgSXbYj5Rs-FF4DzkMvhdQLh0Mxe6AD8V-doP6wqe_gmYmx_oUKqIlMkwpMu",userId:"guides-user",ui:{elements:{view:"default",navigation:{show:!0,position:"top",action:{close:!1,back:!1,load:!1,save:!1,export:{show:!0,format:["image/png"]},download:!0}},panels:{inspector:{show:!0,position:"left"},assetLibrary:{show:!0,position:"left"},settings:{show:!0}},dock:{iconSize:"large",hideLabels:!1,groups:[{id:"ly.img.template",entryIds:["ly.img.template"]},{id:"ly.img.defaultGroup",showOverview:!0}],defaultGroupId:"ly.img.defaultGroup"},libraries:{insert:{entries:e=>e,floating:!0,autoClose:!1},replace:{entries:e=>e,floating:!0,autoClose:!1}},blocks:{opacity:!1,transform:!1,"//ly.img.ubq/image":{adjustments:!0,filters:!0,effects:!0,blur:!0,crop:!0},"//ly.img.ubq/page":{manage:!0,format:!0,maxDuration:30*60}}},pageFormats:{"din-a6":{default:!0,width:148,height:105,unit:"Millimeter",fixedOrientation:!1},"twitter-profile":{width:400,height:400,unit:"Pixel"},"american-letter":{width:8.5,height:11,unit:"Inch"}}},callbacks:{onUpload:"local",onExport:(e,n)=>{let a=URL.createObjectURL(e[0]);return P.src=a,h=a,i(),c=i(),Promise.resolve()},onUpload:(e,n)=>{console.log(e);let a=URL.createObjectURL(e);const k={id:a,meta:{uri:a,thumbUri:a}};return Promise.resolve(k)}}};CreativeEditorSDK.create("#cesdk_container",V).then(async e=>{e.addDefaultAssetSources(),e.addDemoAssetSources({sceneMode:"Design"}),await e.createDesignScene()}),D.addEventListener("change",function(e){const n=e.target.files[0];if(n){const a=new FileReader;a.onload=function(k){let Y=URL.createObjectURL(D.files[0]);P.src=k.target.result,h=Y,i(),c=i()},a.readAsDataURL(n)}}),o.ALPHA_COMBINE,o.ALPHA_ADD,o.ALPHA_SUBTRACT,o.ALPHA_MULTIPLY,o.ALPHA_MAXIMIZED;function i(){const e=new M("mat",t),n=new L(`${h}`,t);return e.diffuseTexture=n,e.diffuseTexture.hasAlpha=!0,e.zOffset=-2,e}i(),t.getMeshByName("FinalBaseMesh");var v=null;let l=.03,I=0,w=new y(l,l,.05),b=0;x.addEventListener("change",function(){l=x.value/1,w=new y(l,l+.01,.03)}),E.addEventListener("change",function(){I=E.value/10,b=I});function q(){v&&v.dispose();var e=t.pick(t.pointerX,t.pointerY);if(e.hit){var n=C.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),angle:b,size:w});n.material=c,v=n}}function B(){const e=t.pick(t.pointerX,t.pointerY);if(e.pickedMesh){var n=C.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),size:w,angle:b});n.material=c}}var u=m.getRenderingCanvas();u.addEventListener("mousemove",q,!1),u.addEventListener("dblclick",B,!1),u.addEventListener("touchstart",B,!1),t.onDispose=function(){u.removeEventListener("mousemove",q)}}),t},$=Q();m.runRenderLoop(function(){$.render()});window.addEventListener("resize",function(){m.resize()});
