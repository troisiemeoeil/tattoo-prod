import{E as i,S as K,H as W,V as m,D as Z,a as Q,T as f,b as x,M as T}from"./ExtrasAsMetadata-aASh9PhV.js";import"https://cdn.img.ly/packages/imgly/cesdk-js/1.18.1/cesdk.umd.js";const v=document.querySelector(".maleModelBtn"),_=document.querySelector(".femaleModelBtn");v.addEventListener("mouseover",t=>{v.style.backgroundColor="white",_.style.backgroundColor="transparent"});v.addEventListener("mouseout",t=>{v.style.backgroundColor="transparent",_.style.backgroundColor="white"});const $=document.getElementById("renderCanvas"),w=new i($),O=document.querySelector(".preview");document.querySelector(".exportBtn");const J="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/color_map.jpg?t=2023-12-13T21%3A45%3A00.971Z",U="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/render_map.jpg",ee="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/skin_0001_color_2k.jpg",te=document.querySelector(".darkSkin"),ne=document.querySelector(".whiteSkin"),ae="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/models/g8Walking.glb",oe=function(){const t=new K(w);t.createDefaultCamera(!0,!0,!0);const j=t.activeCamera;j.wheelDeltaPercentage=.01;var z=new W("HemiLight",new m(0,5,0),t);z.intensity=.5;var M=new Z("directional",new m(-.5,-2,.8),t);M.intensity=.3,M.range=100;const H=document.querySelector(".startAnimationBtn"),F=document.querySelector(".stopAnimationBtn"),V=-.3,Y=.35;return Q.ImportMesh("",ae,"",t,function(G){var g=G[0];g.position.y=V,g.scaling.scaleInPlace(Y);const o=1,A=.2,E=.2,s=new f(J,t),D=new x("defaultMat",t);D.diffuseTexture=s,D.roughness=0;const r=new x("test",t),l=new f(U,t,void 0,!1);r.diffuseTexture=l,r.roughness=0,l.uScale=s.uScale=o/A*2,l.vScale=s.vScale=o/E*2,l.uOffset=s.uOffset=-0,l.vOffset=s.vOffset=-0,g.getChildMeshes().forEach((e,n)=>{e.material=r,r.reflectionTexture=null}),te.addEventListener("click",()=>{console.log("hello");const e=new f(ee,t,void 0,!1);r.diffuseTexture=e,e.uScale=o,e.vScale=o,e.uOffset=-0,e.vOffset=-0}),ne.addEventListener("click",()=>{console.log("hello");const e=new f(U,t,void 0,!1);r.diffuseTexture=e,e.uScale=o/A*2,e.vScale=o/E*2,e.uOffset=-0,e.vOffset=-0}),t.stopAllAnimations(),g.rotation=new m(0,0,0);const c=t.getAnimationGroupByName("Armature|mixamo.com|Layer0");H.addEventListener("click",()=>{c.start(!0,1,c.from,c.to,!1)}),F.addEventListener("click",()=>{c.reset(),c.stop()});const q=document.getElementById("angle"),I=document.getElementById("width"),P=document.querySelector("input");var k="./cat.png";let p;const X={license:"vERESgSXbYj5Rs-FF4DzkMvhdQLh0Mxe6AD8V-doP6wqe_gmYmx_oUKqIlMkwpMu",userId:"guides-user",ui:{elements:{view:"default",navigation:{show:!0,position:"top",action:{close:!1,back:!1,load:!1,save:!1,export:{show:!0,format:["image/png"]},download:!0}},panels:{inspector:{show:!0,position:"left"},assetLibrary:{show:!0,position:"left"},settings:{show:!0}},dock:{iconSize:"large",hideLabels:!1,groups:[{id:"ly.img.template",entryIds:["ly.img.template"]},{id:"ly.img.defaultGroup",showOverview:!0}],defaultGroupId:"ly.img.defaultGroup"},libraries:{insert:{entries:e=>e,floating:!0,autoClose:!1},replace:{entries:e=>e,floating:!0,autoClose:!1}},blocks:{opacity:!1,transform:!1,"//ly.img.ubq/image":{adjustments:!0,filters:!0,effects:!0,blur:!0,crop:!0},"//ly.img.ubq/page":{manage:!0,format:!0,maxDuration:30*60}}},pageFormats:{"din-a6":{default:!0,width:148,height:105,unit:"Millimeter",fixedOrientation:!1},"twitter-profile":{width:400,height:400,unit:"Pixel"},"american-letter":{width:8.5,height:11,unit:"Inch"}}},callbacks:{onUpload:"local",onExport:(e,n)=>{let a=URL.createObjectURL(e[0]);return O.src=a,k=a,u(),p=u(),Promise.resolve()},onUpload:(e,n)=>{console.log(e);let a=URL.createObjectURL(e);const S={id:a,meta:{uri:a,thumbUri:a}};return Promise.resolve(S)}}};CreativeEditorSDK.create("#cesdk_container",X).then(async e=>{e.addDefaultAssetSources(),e.addDemoAssetSources({sceneMode:"Design"}),await e.createDesignScene()}),P.addEventListener("change",function(e){const n=e.target.files[0];if(n){const a=new FileReader;a.onload=function(S){let N=URL.createObjectURL(P.files[0]);O.src=S.target.result,k=N,u(),p=u()},a.readAsDataURL(n)}}),i.ALPHA_COMBINE,i.ALPHA_ADD,i.ALPHA_SUBTRACT,i.ALPHA_MULTIPLY,i.ALPHA_MAXIMIZED;function u(){const e=new x("mat",t),n=new f(`${k}`,t);return e.diffuseTexture=n,e.diffuseTexture.hasAlpha=!0,e.zOffset=-2,e}u(),t.getMeshByName("FinalBaseMesh");var b=null;let d=.03,B=0,L=new m(d,d,.05),y=0;I.addEventListener("change",function(){d=I.value/1,L=new m(d,d,.03)}),q.addEventListener("change",function(){B=q.value/10,y=B});function C(){b&&b.dispose();var e=t.pick(t.pointerX,t.pointerY);if(e.hit){var n=T.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),angle:y,size:L});n.material=p,b=n}}function R(){const e=t.pick(t.pointerX,t.pointerY);if(e.pickedMesh){var n=T.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),size:L,angle:y});n.material=p}}var h=w.getRenderingCanvas();h.addEventListener("mousemove",C,!1),h.addEventListener("dblclick",R,!1),h.addEventListener("touchstart",R,!1),t.onDispose=function(){h.removeEventListener("mousemove",C)}}),t},re=oe();w.runRenderLoop(function(){re.render()});window.addEventListener("resize",function(){w.resize()});
