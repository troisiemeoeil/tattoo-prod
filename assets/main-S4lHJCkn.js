import{E as i,S as K,H as Z,V as d,D as Q,a as W,T as m,b as x,M as T}from"./babylon.inspector.bundle.max-2aYK1OyM.js";import"https://cdn.img.ly/packages/imgly/cesdk-js/1.18.1/cesdk.umd.js";const _=document.querySelector(".maleModelBtn"),p=document.querySelector(".femaleModelBtn");p.addEventListener("mouseover",t=>{p.style.backgroundColor="white",_.style.backgroundColor="transparent"});p.addEventListener("mouseout",t=>{p.style.backgroundColor="transparent",_.style.backgroundColor="white"});const $=document.getElementById("renderCanvas"),h=new i($),U=document.querySelector(".preview");document.querySelector(".exportBtn");const J="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/color_map.jpg?t=2023-12-13T21%3A45%3A00.971Z",O="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/render_map.jpg",ee="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/textures/skin_0001_color_2k.jpg",te=document.querySelector(".darkSkin"),ne=document.querySelector(".whiteSkin"),ae=function(){const t=new K(h);t.createDefaultCamera(!0,!0,!0);const j=t.activeCamera;j.wheelDeltaPercentage=.01;var z=new Z("HemiLight",new d(0,5,0),t);z.intensity=.5;var M=new Q("directional",new d(-.5,-2,.8),t);M.intensity=.3,M.range=100;const H=document.querySelector(".startAnimationBtn"),F=document.querySelector(".stopAnimationBtn"),V="https://rfkdwkpnnalilegqqggx.supabase.co/storage/v1/object/public/troisiemeoeil-bucket/files/ModelwithSkinUV2.glb",Y=.6;return W.ImportMesh("",V,"",t,function(G){var v=G[0];v.scaling.scaleInPlace(Y);const o=1,A=.2,E=.2,s=new m(J,t),D=new x("defaultMat",t);D.diffuseTexture=s,D.roughness=0;const r=new x("test",t),l=new m(O,t,void 0,!1);r.diffuseTexture=l,r.roughness=0,l.uScale=s.uScale=o/A*2,l.vScale=s.vScale=o/E*2,l.uOffset=s.uOffset=-0,l.vOffset=s.vOffset=-0,v.getChildMeshes().forEach((e,n)=>{e.material=r,r.reflectionTexture=null}),te.addEventListener("click",()=>{console.log("hello");const e=new m(ee,t,void 0,!1);r.diffuseTexture=e,e.uScale=o,e.vScale=o,e.uOffset=-0,e.vOffset=-0}),ne.addEventListener("click",()=>{console.log("hello");const e=new m(O,t,void 0,!1);r.diffuseTexture=e,e.uScale=o/A*2,e.vScale=o/E*2,e.uOffset=-0,e.vOffset=-0}),t.stopAllAnimations(),v.rotation=new d(0,0,0);const w=t.getAnimationGroupByName("Armature|mixamo.com|Layer0");H.addEventListener("click",()=>{w.start(!0,1,w.from,w.to,!1)}),F.addEventListener("click",()=>{t.stopAllAnimations()});const q=document.getElementById("angle"),I=document.getElementById("width"),B=document.querySelector("input");var k="./cat.png";let f;const X={license:"vERESgSXbYj5Rs-FF4DzkMvhdQLh0Mxe6AD8V-doP6wqe_gmYmx_oUKqIlMkwpMu",userId:"guides-user",ui:{elements:{view:"default",navigation:{show:!0,position:"top",action:{close:!1,back:!1,load:!1,save:!1,export:{show:!0,format:["image/png"]},download:!0}},panels:{inspector:{show:!0,position:"left"},assetLibrary:{show:!0,position:"left"},settings:{show:!0}},dock:{iconSize:"large",hideLabels:!1,groups:[{id:"ly.img.template",entryIds:["ly.img.template"]},{id:"ly.img.defaultGroup",showOverview:!0}],defaultGroupId:"ly.img.defaultGroup"},libraries:{insert:{entries:e=>e,floating:!0,autoClose:!1},replace:{entries:e=>e,floating:!0,autoClose:!1}},blocks:{opacity:!1,transform:!1,"//ly.img.ubq/image":{adjustments:!0,filters:!0,effects:!0,blur:!0,crop:!0},"//ly.img.ubq/page":{manage:!0,format:!0,maxDuration:30*60}}},pageFormats:{"din-a6":{default:!0,width:148,height:105,unit:"Millimeter",fixedOrientation:!1},"twitter-profile":{width:400,height:400,unit:"Pixel"},"american-letter":{width:8.5,height:11,unit:"Inch"}}},callbacks:{onUpload:"local",onExport:(e,n)=>{let a=URL.createObjectURL(e[0]);return U.src=a,k=a,c(),f=c(),Promise.resolve()},onUpload:(e,n)=>{console.log(e);let a=URL.createObjectURL(e);const y={id:a,meta:{uri:a,thumbUri:a}};return Promise.resolve(y)}}};CreativeEditorSDK.create("#cesdk_container",X).then(async e=>{e.addDefaultAssetSources(),e.addDemoAssetSources({sceneMode:"Design"}),await e.createDesignScene()}),B.addEventListener("change",function(e){const n=e.target.files[0];if(n){const a=new FileReader;a.onload=function(y){let N=URL.createObjectURL(B.files[0]);U.src=y.target.result,k=N,c(),f=c()},a.readAsDataURL(n)}}),i.ALPHA_COMBINE,i.ALPHA_ADD,i.ALPHA_SUBTRACT,i.ALPHA_MULTIPLY,i.ALPHA_MAXIMIZED;function c(){const e=new x("mat",t),n=new m(`${k}`,t);return e.diffuseTexture=n,e.diffuseTexture.hasAlpha=!0,e.zOffset=-2,e}c(),t.getMeshByName("FinalBaseMesh");var b=null;let u=.03,C=0,L=new d(u,u,.05),S=0;I.addEventListener("change",function(){u=I.value/1,L=new d(u,u,.03)}),q.addEventListener("change",function(){C=q.value/10,S=C});function P(){b&&b.dispose();var e=t.pick(t.pointerX,t.pointerY);if(e.hit){var n=T.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),angle:S,size:L});n.material=f,b=n}}function R(){const e=t.pick(t.pointerX,t.pointerY);if(e.pickedMesh){var n=T.CreateDecal("decal",e.pickedMesh,{position:e.pickedPoint,normal:t.activeCamera.getForwardRay().direction.negateInPlace().normalize(),size:L,angle:S});n.material=f}}var g=h.getRenderingCanvas();g.addEventListener("mousemove",P,!1),g.addEventListener("dblclick",R,!1),g.addEventListener("touchstart",R,!1),t.onDispose=function(){g.removeEventListener("mousemove",P)}}),t},oe=ae();h.runRenderLoop(function(){oe.render()});window.addEventListener("resize",function(){h.resize()});
